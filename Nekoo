local Players           = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local CoreGui           = game:GetService("CoreGui")
local RunService        = game:GetService("RunService")
local UserInputService  = game:GetService("UserInputService")
local localPlayer       = Players.LocalPlayer

-- [[ å½±çš„é‹è¡Œé–å®šï¼šé˜²æ­¢é‡è¤‡åŸ·è¡Œå°è‡´å¡é “ ]]
if getgenv().NEKO_RUNNING then return end
getgenv().NEKO_RUNNING = true

local Remote = ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("CommF_")
local function Sea(cmd)
    pcall(function()
        Remote:InvokeServer(cmd)
    end)
end

-- [[ å¼·æ•ˆæ¸…ç†ï¼šç¢ºä¿ PC èˆ‡æ‰‹æ©Ÿç«¯éƒ½ä¸æœƒ UI è¡çª ]]
local function NuclearClean()
    local targets = {"NEKO BF", "NekoUI", "NekoTerminal_Lib", "NekoStickyMenu", "NekoMainBtn"}
    for _, name in ipairs(targets) do
        local obj = CoreGui:FindFirstChild(name) or localPlayer:FindFirstChild("PlayerGui"):FindFirstChild(name)
        if obj then 
            pcall(function() obj:Destroy() end) 
        end
    end
end

NuclearClean()
task.wait(0.3)

-- [[ å…¨åŸŸè¨­å®šå€¼ ]]
_G.Settings = {
    ClickDelay    = 0.01,
    Distance      = 5000,
    PullEnemies   = false,
    Mode          = "None",
    FOV           = 80,
    MaxZoom       = 128,
    CatSpeedValue = 50,
    SpeedEnabled  = false,
    InfJump       = false,
    StickyEnabled = false,
    StickyTarget  = nil,
    StickyOffset  = CFrame.new(3, 0, 7),
    SnapDistance  = 500,
    LerpSpeed     = 0.35,
    AutoBuyFruit  = false
}

_G.NekoRunning = true
_G.NekoAttack  = false
_G.AutoV4      = false
_G.NekoESP     = false

-- [[ æ ¸å¿ƒè¼‰å…¥é‚è¼¯ ]]
local success, UIContent = pcall(function()
    return game:HttpGet("https://raw.githubusercontent.com/n9wmwd7ycz-crypto/-/refs/heads/main/Ui")
end)

if not success or not UIContent then 
    warn("ğŸ¾ NEKO: è¯ç¶²è¼‰å…¥å¤±æ•—ï¼Œè«‹æª¢æŸ¥åŸ·è¡Œå™¨æ¬Šé™å–µï¼")
    return 
end

local NekoLib = loadstring(UIContent)()
local myUI, screenGui = NekoLib.new("NEKO BF")

-- [[ å®¹å™¨æ›è¼‰å„ªåŒ–ï¼šå…¼å®¹ PC (CoreGui) èˆ‡ æ‰‹æ©Ÿ (PlayerGui) ]]
pcall(function()
    screenGui.Parent = CoreGui
end)
if screenGui.Parent ~= CoreGui then
    screenGui.Parent = localPlayer:WaitForChild("PlayerGui")
end

-- [[ å…¶ä»–åŠŸèƒ½è…³æœ¬è¼‰å…¥ ]]
task.spawn(function()
    pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/n9wmwd7ycz-crypto/-/refs/heads/main/PvP"))()
    end)
end)

task.spawn(function()
    while task.wait(1) do
        pcall(function()
            if localPlayer.Character and not localPlayer.Character:FindFirstChild("HasBuso") then
                Remote:InvokeServer("Buso")
            end
        end)
    end
end)

task.spawn(function()
    while task.wait(2) do
        if _G.AutoV4 then
            pcall(function()
                local character = localPlayer.Character
                local awakening = localPlayer:FindFirstChild("Backpack"):FindFirstChild("Awakening") 
                    or (character and character:FindFirstChild("Awakening"))
                if awakening then
                    local remote = awakening:FindFirstChild("RemoteFunction")
                    if remote then remote:InvokeServer(true) end
                end
            end)
        end
    end
end)

-- [[ é¡é ­èˆ‡ç§»å‹•é‚è¼¯ ]]
local function UpdateCamera()
    pcall(function()
        localPlayer.CameraMaxZoomDistance = _G.Settings.MaxZoom
        workspace.CurrentCamera.FieldOfView = _G.Settings.FOV
    end)
end

UpdateCamera()

UserInputService.JumpRequest:Connect(function()
    if _G.Settings.InfJump then
        pcall(function()
            local char = localPlayer.Character
            if char and char:FindFirstChildOfClass("Humanoid") then
                char:FindFirstChildOfClass("Humanoid"):ChangeState(Enum.HumanoidStateType.Jumping)
            end
        end)
    end
end)

-- [[ UI ä»‹é¢é…ç½®å€ ]]
local TabInfo = myUI:Tab("å…¬å‘Š / ç‹€æ…‹")
local MonSec  = TabInfo:Section("è²“å¥´å€‘æœ‰äº‹DCæ‰¾æˆ‘")
local BtnAtk  = MonSec:Button("âš”ï¸ æ”»æ“Šï¼šOFF", function() end)
local BtnMode = MonSec:Button("ğŸ§  æ¨¡å¼ï¼šNone", function() end)

task.spawn(function()
    while task.wait(0.5) do
        pcall(function()
            BtnAtk.Text = "âš”ï¸ æ”»æ“Šï¼š" .. (_G.NekoAttack and "ğŸŸ¢ é‹è¡Œä¸­" or "ğŸ”´ å·²é—œé–‰")
            local m = (_G.Settings.Mode == "Mob" and "è‡ªå‹•æ‰“æ€ª") or (_G.Settings.Mode == "All" and "å…¨æ®ºæ¨¡å¼") or "ä¼‘æ¯ä¸­"
            BtnMode.Text = "ğŸ§  æ¨¡å¼ï¼š" .. m
        end)
    end
end)

-- ... (ä¸­é–“å…¶é¤˜æˆ°é¬¥ã€ç’°å¢ƒã€ç§»å‹•ã€æœå¯¦åˆ†é ä»£ç¢¼å®Œå…¨ä¿æŒåŸæ¨£å–µ) ...
-- [æ­¤è™•çœç•¥å…¶é¤˜é‡è¤‡çš„ Tab è¨­ç½®ä»£ç¢¼ï¼ŒåŸ·è¡Œæ™‚è«‹ä¿æŒå®Œæ•´ç‰ˆå…§å®¹]

-- [[ ğŸ¾ å•Ÿå‹•æŒ‰éˆ•è¨­ç½® ]]
local MiniBtn = Instance.new("TextButton")
MiniBtn.Name = "NekoMainBtn"
MiniBtn.Size = UDim2.new(0, 65, 0, 65)
MiniBtn.Position = UDim2.new(0, 20, 0.5, -32)
MiniBtn.Text = "ğŸ¾"
MiniBtn.TextSize = 30
MiniBtn.BackgroundColor3 = Color3.fromRGB(20, 20, 25)
MiniBtn.TextColor3 = Color3.fromRGB(255, 120, 180)
MiniBtn.ZIndex = 10
Instance.new("UICorner", MiniBtn).CornerRadius = UDim.new(1, 0)
local Stroke = Instance.new("UIStroke", MiniBtn)
Stroke.Color = Color3.fromRGB(255, 120, 180)
Stroke.Thickness = 2

MiniBtn.Parent = screenGui
myUI:AddDrag(MiniBtn)
MiniBtn.MouseButton1Click:Connect(function() myUI:Toggle() end)

print("ğŸ¾ NEKO TERMINAL: å·²ç§»é™¤ç™½åå–®ï¼Œå…¨ç³»çµ±å•Ÿå‹•æˆåŠŸï¼")
