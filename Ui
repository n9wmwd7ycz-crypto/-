-- [[ üêæ NEKO CYBER LIBRARY v2.1 (Á¥î UI Â∫´) üêæ ]] --
local library = {}
local services = setmetatable({}, {__index = function(_, k) return game:GetService(k) end})
local ts = services.TweenService

local function Tween(obj, info, prop)
    local t = ts:Create(obj, TweenInfo.new(unpack(info)), prop)
    t:Play()
    return t
end

local C = {
    Accent = Color3.fromRGB(0, 255, 255), SideBG = Color3.fromRGB(5, 5, 8),
    MainBG = Color3.fromRGB(8, 10, 15), BtnBG = Color3.fromRGB(20, 25, 35),
    Text = Color3.fromRGB(160, 180, 200), TextDim = Color3.fromRGB(70, 90, 110),
    TextHi = Color3.fromRGB(255, 255, 255), Stroke = Color3.fromRGB(0, 255, 255),
    DotOff = Color3.fromRGB(35, 45, 55),
}

function library.new(name)
    local sg = Instance.new("ScreenGui", services.CoreGui)
    sg.Name = "Neko_Library"
    local Main = Instance.new("Frame", sg)
    Main.Size = UDim2.new(0, 460, 0, 310)
    Main.Position = UDim2.new(0.5, -230, 0.5, -155)
    Main.BackgroundColor3 = C.MainBG
    Instance.new("UICorner", Main).CornerRadius = UDim.new(0, 14)
    local MainStroke = Instance.new("UIStroke", Main)
    MainStroke.Color = C.Stroke; MainStroke.Transparency = 0.8; MainStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

    local Side = Instance.new("Frame", Main)
    Side.Size = UDim2.new(0, 135, 1, 0)
    Side.BackgroundColor3 = C.SideBG
    Instance.new("UICorner", Side).CornerRadius = UDim.new(0, 14)
    local Title = Instance.new("TextLabel", Side)
    Title.Size = UDim2.new(1, 0, 0, 50); Title.Text = "‚ö° " .. name:upper(); Title.TextColor3 = C.Accent; Title.Font = Enum.Font.GothamBold; Title.TextSize = 16; Title.BackgroundTransparency = 1

    local TabContainer = Instance.new("ScrollingFrame", Side)
    TabContainer.Size = UDim2.new(1, -12, 1, -60); TabContainer.Position = UDim2.new(0, 6, 0, 50); TabContainer.BackgroundTransparency = 1; TabContainer.ScrollBarThickness = 0
    local tl = Instance.new("UIListLayout", TabContainer); tl.Padding = UDim.new(0, 5)

    local Pages = Instance.new("Frame", Main)
    Pages.Size = UDim2.new(1, -150, 1, -20); Pages.Position = UDim2.new(0, 140, 0, 10); Pages.BackgroundTransparency = 1
    local window = {current = nil}

    function window:Toggle() Main.Visible = not Main.Visible end

    function window:Tab(name)
        local Page = Instance.new("ScrollingFrame", Pages)
        Page.Size = UDim2.new(1, 0, 1, 0); Page.BackgroundTransparency = 1; Page.Visible = false; Page.ScrollBarThickness = 0
        local pl = Instance.new("UIListLayout", Page); pl.Padding = UDim.new(0, 10)
        
        local Btn = Instance.new("TextButton", TabContainer)
        Btn.Size = UDim2.new(1, 0, 0, 36); Btn.BackgroundColor3 = C.BtnBG; Btn.BackgroundTransparency = 1; Btn.Text = "      " .. name; Btn.TextColor3 = C.TextDim; Btn.Font = Enum.Font.GothamMedium; Btn.TextSize = 12; Btn.TextXAlignment = Enum.TextXAlignment.Left
        Instance.new("UICorner", Btn).CornerRadius = UDim.new(0, 8)
        
        local Indicator = Instance.new("TextLabel", Btn)
        Indicator.Size = UDim2.new(0, 40, 1, 0); Indicator.Position = UDim2.new(1, -45, 0, 0); Indicator.Text = ""; Indicator.TextColor3 = C.Accent; Indicator.Font = Enum.Font.GothamBold; Indicator.TextSize = 11; Indicator.TextXAlignment = Enum.TextXAlignment.Right; Indicator.BackgroundTransparency = 1

        Btn.MouseButton1Click:Connect(function()
            if window.current then
                window.current.Page.Visible = false; window.current.Indicator.Text = ""; Tween(window.current.Btn, {0.2}, {BackgroundTransparency = 1, TextColor3 = C.TextDim})
            end
            Page.Visible = true; Indicator.Text = "Ë≤ìË≤ì"; Tween(Btn, {0.2}, {BackgroundTransparency = 0.9, TextColor3 = C.TextHi})
            window.current = {Page = Page, Btn = Btn, Indicator = Indicator}
        end)

        if not window.current then Page.Visible = true; Indicator.Text = "Ë≤ìË≤ì"; Btn.BackgroundTransparency = 0.9; Btn.TextColor3 = C.TextHi; window.current = {Page = Page, Btn = Btn, Indicator = Indicator} end

        local tab = {}
        function tab:Section(txt)
            local Sec = Instance.new("Frame", Page)
            Sec.Size = UDim2.new(0.98, 0, 0, 32); Sec.BackgroundColor3 = Color3.fromRGB(255, 255, 255); Sec.BackgroundTransparency = 0.98
            Instance.new("UICorner", Sec).CornerRadius = UDim.new(0, 10)
            local Box = Instance.new("Frame", Sec)
            Box.Size = UDim2.new(1, 0, 0, 0); Box.Position = UDim2.new(0, 0, 0, 28); Box.BackgroundTransparency = 1
            local bl = Instance.new("UIListLayout", Box); bl.Padding = UDim.new(0, 6); bl.HorizontalAlignment = Enum.HorizontalAlignment.Center
            bl:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function() Sec.Size = UDim2.new(0.98, 0, 0, bl.AbsoluteContentSize.Y + 38) end)
            
            local T = Instance.new("TextLabel", Sec)
            T.Size = UDim2.new(1, -10, 0, 25); T.Position = UDim2.new(0, 10, 0, 2); T.Text = txt:upper(); T.TextColor3 = C.Accent; T.Font = Enum.Font.GothamBold; T.TextSize = 10; T.TextXAlignment = Enum.TextXAlignment.Left; T.BackgroundTransparency = 1

            local e = {}
            function e:Button(t, cb)
                local b = Instance.new("TextButton", Box)
                b.Size = UDim2.new(0.94, 0, 0, 32); b.BackgroundColor3 = C.BtnBG; b.Text = t; b.TextColor3 = C.Text; b.Font = Enum.Font.GothamMedium; b.TextSize = 12
                Instance.new("UICorner", b).CornerRadius = UDim.new(0, 8)
                b.MouseButton1Click:Connect(cb)
                return b
            end
            function e:Toggle(t, cb)
                local b = Instance.new("TextButton", Box)
                b.Size = UDim2.new(0.94, 0, 0, 32); b.BackgroundColor3 = C.BtnBG; b.Text = "  "..t; b.TextColor3 = C.Text; b.Font = Enum.Font.GothamMedium; b.TextSize = 12; b.TextXAlignment = Enum.TextXAlignment.Left
                Instance.new("UICorner", b).CornerRadius = UDim.new(0, 8)
                local d = Instance.new("Frame", b); d.Size = UDim2.new(0, 24, 0, 13); d.Position = UDim2.new(1, -32, 0.5, -6.5); d.BackgroundColor3 = C.DotOff
                Instance.new("UICorner", d).CornerRadius = UDim.new(1, 0)
                local dot = Instance.new("Frame", d); dot.Size = UDim2.new(0, 9, 0, 9); dot.Position = UDim2.new(0, 2, 0.5, -4.5); dot.BackgroundColor3 = Color3.new(1,1,1); Instance.new("UICorner", dot).CornerRadius = UDim.new(1,0)
                local s = false
                b.MouseButton1Click:Connect(function() s = not s; Tween(d, {0.2}, {BackgroundColor3 = s and C.Accent or C.DotOff}); Tween(dot, {0.2}, {Position = s and UDim2.new(1, -11, 0.5, -4.5) or UDim2.new(0, 2, 0.5, -4.5)}); cb(s) end)
                return b
            end
            return e
        end
        return tab
    end
    function window:AddDrag(obj)
        local dragging, dragStart, startPos
        obj.InputBegan:Connect(function(input) if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then dragging = true dragStart = input.Position startPos = obj.Position end end)
        services.UserInputService.InputChanged:Connect(function(input) if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then local delta = input.Position - dragStart; obj.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y) end end)
        services.UserInputService.InputEnded:Connect(function() dragging = false end)
    end
    window:AddDrag(Main)
    return window, sg
end
return library
