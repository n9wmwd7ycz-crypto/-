-- [[ ğŸ‘ï¸ NEKO SENSE - CLEAN & INFINITE VER. ğŸ¾ ]] --
-- å§Šå§Šçš„å°æé†’ï¼šæ­¤ç‰ˆæœ¬å·²å„ªåŒ–è¦–è¦ºå±¤ç´šï¼Œä¸¦æ”¯æŒ 1,000,000m ç›£æ§

if _G.ESPStarted then _G.ESPStarted = false; task.wait(0.3) end
_G.ESPStarted = true

local Players = game:GetService("Players")
local CoreGui = game:GetService("CoreGui")
local LocalPlayer = Players.LocalPlayer

-- å»ºç«‹/æŠ“å–å®¹å™¨ (ç¶­æŒåŸæœ¬ CoreGui é‚è¼¯ï¼Œç¢ºä¿å°æ¥ç©©å®š)
local Folder = CoreGui:FindFirstChild("NekoESP") or Instance.new("Folder", CoreGui)
Folder.Name = "NekoESP"

-- ç©å®¶é›¢é–‹ç›£è½
local removeConn = Players.PlayerRemoving:Connect(function(p)
    if Folder:FindFirstChild(p.Name) then
        Folder[p.Name]:Destroy()
    end
end)

task.spawn(function()
    while _G.ESPStarted do
        for _, p in ipairs(Players:GetPlayers()) do
            pcall(function() 
                if p ~= LocalPlayer then
                    local char = p.Character
                    local hrp = char and char:FindFirstChild("HumanoidRootPart")
                    local hum = char and char:FindFirstChildOfClass("Humanoid")
                    
                    -- æ ¸å¿ƒé‚è¼¯ï¼šæª¢æŸ¥ä¸» UI é–‹é—œ
                    if _G.NekoESP and char and hrp and hum and hum.Health > 0 then
                        local lroot = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
                        local dist = lroot and (hrp.Position - lroot.Position).Magnitude or 0
                        
                        -- [[ 1,000,000m è¶…é è·éæ¿¾ ]]
                        if dist <= 1000000 then
                            local bb = Folder:FindFirstChild(p.Name) or Instance.new("BillboardGui", Folder)
                            bb.Name = p.Name; bb.Adornee = hrp; bb.AlwaysOnTop = true
                            bb.Size = UDim2.new(0, 160, 0, 60); bb.Enabled = true
                            
                            -- è¡€é‡ç™¾åˆ†æ¯”èˆ‡é¡è‰²è¨ˆç®—
                            local hpP = math.clamp(hum.Health / hum.MaxHealth, 0, 1)
                            local hpC = Color3.fromRGB(100, 255, 100):Lerp(Color3.fromRGB(255, 50, 50), 1 - hpP)
                            
                            -- [A] åå­—æ¨™ç±¤ (å„ªåŒ–ï¼šå°‡è·é›¢æ•´åˆé€²ä¾†ï¼Œæ¸›å°‘æ¨™ç±¤æ•¸é‡)
                            local nameL = bb:FindFirstChild("NameL") or Instance.new("TextLabel", bb)
                            nameL.Name = "NameL"; nameL.Parent = bb
                            nameL.Size = UDim2.new(1, 0, 0.4, 0); nameL.BackgroundTransparency = 1
                            nameL.Font = Enum.Font.GothamBold; nameL.TextSize = 13
                            nameL.TextColor3 = Color3.new(1, 1, 1); nameL.TextStrokeTransparency = 0.4
                            nameL.Text = string.format("ğŸ¾ %s [%dm]", p.Name, math.floor(dist))
                            
                            -- [B] è¦–è¦ºæ·¨åŒ–é‚è¼¯ï¼šè¿‘è·é›¢æ‰é¡¯ç¤ºç´°ç¯€
                            local isClose = dist < 800
                            
                            -- è¡€æ¢èƒŒæ™¯
                            local barBg = bb:FindFirstChild("BarBg") or Instance.new("Frame", bb)
                            barBg.Name = "BarBg"; barBg.Parent = bb
                            barBg.Size = UDim2.new(0.6, 0, 0, 3); barBg.Position = UDim2.new(0.2, 0, 0.55, 0)
                            barBg.BackgroundColor3 = Color3.new(0, 0, 0); barBg.BorderSizePixel = 0
                            barBg.Visible = isClose -- é è·é›¢ä¸é¡¯ç¤ºï¼Œä¿æŒç•«é¢ä¹¾æ·¨
                            
                            -- è¡€æ¢å‹•æ…‹æ¢
                            local bar = barBg:FindFirstChild("Bar") or Instance.new("Frame", barBg)
                            bar.Name = "Bar"; bar.Parent = barBg; bar.BorderSizePixel = 0
                            bar.Size = UDim2.new(hpP, 0, 1, 0); bar.BackgroundColor3 = hpC
                            
                            -- [C] Highlight é€è¦–
                            local highlight = char:FindFirstChild("NekoHighlight") or Instance.new("Highlight", char)
                            highlight.Name = "NekoHighlight"; highlight.Adornee = char
                            highlight.FillColor = hpC; highlight.FillTransparency = 0.8
                            highlight.OutlineTransparency = 0.2
                            highlight.Enabled = isClose -- åªæœ‰è¿‘è·é›¢æœƒç™¼å…‰ï¼Œé¿å…é è™•ä¸€ç‰‡é›œäº‚
                        end
                    else
                        -- é—œé–‰æˆ–ç©å®¶ç‹€æ…‹ç•°å¸¸æ™‚éš±è—
                        if Folder:FindFirstChild(p.Name) then Folder[p.Name].Enabled = false end
                        if char and char:FindFirstChild("NekoHighlight") then char.NekoHighlight.Enabled = false end
                    end
                end
            end)
        end
        
        -- æª¢æŸ¥æ®˜ç•™åƒåœ¾
        for _, gui in ipairs(Folder:GetChildren()) do
            if not Players:FindFirstChild(gui.Name) then
                gui:Destroy()
            end
        end
        
        task.wait(0.2) -- æƒæé »ç‡å„ªåŒ–ï¼Œé™ä½ CPU è² æ“”
    end
    
    if removeConn then removeConn:Disconnect() end
    Folder:ClearAllChildren()
end)

print("ğŸ¾ NEKO SENSE: å½±ä¹‹çœ¼å·²é–‹æ•µï¼Œç¯„åœï¼šä¸€ç™¾è¬ç±³å–µï¼")
